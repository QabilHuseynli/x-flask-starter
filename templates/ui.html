<!doctype html>
<meta charset="utf-8">
<title>X + Flask Minimal UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{--ink:#0b1020;--card:#ffffff;--muted:#6b7280;--border:#e5e7eb;--badge:#fee2e2;--badgefg:#991b1b}
body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;max-width:980px;margin:36px auto;padding:0 16px;color:var(--ink)}
h1{display:flex;align-items:center;gap:10px;margin:0 0 16px}
.badge{display:inline-block;background:var(--badge);color:var(--badgefg);border-radius:999px;padding:4px 10px;margin-left:8px;font-size:12px}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px 16px;margin:14px 0}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
input,button,label{font-size:15px}
input{padding:8px 10px;border:1px solid var(--border);border-radius:10px}
button{padding:8px 12px;border:1px solid var(--border);border-radius:10px;background:#f8fafc;cursor:pointer}
button[disabled]{opacity:.6;cursor:not-allowed}
pre{background:#0b1020;color:#d7e1ff;padding:12px;border-radius:10px;overflow:auto;max-height:50vh}
.tweet{border:1px solid var(--border);border-radius:12px;padding:12px;margin:10px 0}
.t-author{display:flex;gap:10px;align-items:center;margin-bottom:6px}
.t-author img{width:34px;height:34px;border-radius:999px}
.t-name{font-weight:600}.t-username{color:var(--muted)}.t-meta{color:var(--muted);font-size:12px;margin-left:auto}
.t-text{white-space:pre-wrap}.media{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.media img{max-width:240px;border-radius:10px;border:1px solid var(--border)}
.controls{display:flex;gap:8px;margin-top:8px}
</style>

<h1>ðŸ§ª X + Flask Minimal UI <span id="ratebadge" class="badge" style="display:none"></span></h1>
<p>This minimal interface is for quick API testing. Avoid repeating queries too frequently to prevent hitting rate limits.</p>

<div class="card">
  <h2>ðŸ‘¤ User Timeline</h2>
  <div class="row">
    <input id="u" placeholder="username (e.g. nasa)">
    <input id="ulimit" type="number" min="1" max="100" value="5">
    <input id="unext" placeholder="next_token (optional)" size="28">
    <label><input id="uincl" type="checkbox"> Include retweets/replies</label>
    <button id="ubtn" onclick="fetchUser()">Fetch</button>
    <button id="umore" onclick="moreUser()" disabled>Load More</button>
    <input id="upages" type="number" min="1" max="20" value="1" style="width:80px" title="how many CSV pages">
    <button onclick="exportUserCsv()">Download CSV</button>
  </div>
  <div id="ulist"></div>
</div>

<div class="card">
  <h2>ðŸ”Ž Recent Search</h2>
  <div class="row">
    <input id="q" placeholder="query (e.g. from:nasa moon)" size="36">
    <input id="qlimit" type="number" min="10" max="100" value="10">
    <input id="qnext" placeholder="next_token (optional)" size="28">
    <label><input id="qincl" type="checkbox"> Include retweets/replies</label>
    <button id="qbtn" onclick="fetchSearch()">Search</button>
    <button id="qmore" onclick="moreSearch()" disabled>Load More</button>
    <input id="qpages" type="number" min="1" max="20" value="1" style="width:80px" title="how many CSV pages">
    <button onclick="exportSearchCsv()">Download CSV</button>
  </div>
  <div id="qlist"></div>
</div>

<div class="card">
  <details>
    <summary>Show/Hide JSON Output</summary>
    <pre id="out">(results will appear here)</pre>
  </details>
</div>

<!-- scripts stay the same -->
<script>
/* ... all your existing JavaScript code remains unchanged ... */
</script>
